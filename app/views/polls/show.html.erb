<div class="min-h-screen w-full flex flex-col items-center p-6 pt-24 bg-gradient-to-br from-blue-900 via-blue-700 to-blue-400">
  <div class="w-full max-w-2xl bg-gray-900 bg-opacity-90 rounded-2xl shadow-2xl p-10 border border-gray-800">
    <h1 class="text-3xl font-bold text-center text-white mb-2"><%= @poll.question %></h1>
    <p class="text-center text-gray-400 mb-8">
      <% if @poll.open? %>
        Status: <span class="text-green-400 font-semibold">Aberta</span>
      <% else %>
        Status: <span class="text-red-400 font-semibold">Fechada</span>
      <% end %>
    </p>

    <% if @poll.closed? || @poll.voted_by?(current_user) %>
      <div class="space-y-4">
        <% @poll.options.each do |option| %>
          <% vote_count = option.votes.count %>
          <% total_votes = @poll.total_votes %>
          <% percentage = total_votes > 0 ? (vote_count.to_f / total_votes) * 100 : 0 %>

          <div class="bg-gray-800 rounded-lg p-4 shadow">
            <div class="flex justify-between items-center mb-1">
              <span class="text-white"><%= option.content %></span>
              <span class="text-sm text-gray-400"><%= vote_count %> votos (<%= "%.2f" % percentage %>%)</span>
            </div>
            <div class="w-full bg-gray-700 rounded-full h-2.5">
              <div class="bg-blue-500 h-2.5 rounded-full" style="width: <%= percentage %>%"></div>
            </div>
          </div>
        <% end %>
      </div>
      <div class="text-center mt-6">
        <span class="text-gray-400">Total de Votos: <%= @poll.total_votes %></span>
      </div>
    <% else %>
      <%= render 'vote_form', poll: @poll %>
    <% end %>

    <div class="mt-8 flex justify-between items-center border-t border-gray-800 pt-6">
      <%= link_to 'Voltar para Enquetes', polls_path, class: 'bg-gray-700 text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-600 transition' %>
    </div>
  </div>
</div>