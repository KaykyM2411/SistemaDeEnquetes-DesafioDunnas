<div class="min-h-screen w-full flex flex-col items-center p-6 pt-4
             bg-gradient-to-br from-blue-900 via-blue-700 to-blue-400">

  <div class="w-full max-w-2xl bg-gray-900 bg-opacity-90 rounded-2xl shadow-2xl p-10 border border-gray-800">

    <h1 class="text-3xl font-bold text-center text-white mb-2">Enquetes Abertas</h1>
    <p class="text-center text-gray-400 mb-8">Participe das enquetes da comunidade.</p>
    
    <% if current_user && current_user.user_type == 1 %>
      <%= link_to 'Cadastrar Novo Usuário', new_user_path, class: "bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition" %>
    <% end %>

    <% if @polls.any? %>
      <div class="grid gap-4">
        <% @polls.each do |poll| %>
          <div class="bg-gray-800 bg-opacity-70 rounded-lg p-6 shadow-xl border border-gray-700 hover:bg-gray-700 transition">
            <h2 class="text-xl font-semibold mb-2">
              <%= link_to poll.question, poll, class: "text-blue-400 hover:text-blue-300" %>
            </h2>
            
            <div class="text-sm text-gray-400 mb-3">
              <span class="bg-blue-900 text-blue-300 px-2 py-1 rounded">
                <%= poll.poll_type == 'single' ? 'Escolha Única' : 'Múltipla Escolha' %>
              </span>
              • Criada por: <%= poll.user.email %>
              • <%= time_ago_in_words(poll.created_at) %> atrás
            </div>
            
            <div class="flex gap-2 mt-4">
              <%= link_to 'Ver Enquete', poll, class: 'bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition' %>
              
              <% if logged_in? && current_user == poll.user %>
                <%= button_to 'Fechar', close_poll_path(poll), method: :post, 
                  class: 'bg-gray-700 text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-600 transition',
                  data: { confirm: 'Tem certeza que quer fechar esta enquete?' } %>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="text-center py-8">
        <p class="text-gray-400">Nenhuma enquete aberta no momento.</p>
        <% if logged_in? %>
          <%= link_to 'Criar primeira enquete', new_poll_path, class: 'text-blue-400 hover:text-blue-300 mt-2 inline-block' %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>